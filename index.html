<!--
[JST 2026-01-18 15:00]  idol_quiz_which_member_fixed10_v20260118-03.html
昭和・平成・令和「どっちがメンバー？」2択クイズ（固定10問 / 外部データJS）
-->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>アイドル2択クイズ：どっちがメンバー？（10問）</title>
  <style>
    :root{
      --bg:#0b1020;
      --text:#eef2ff;
      --muted:rgba(238,242,255,0.70);
      --line:rgba(255,255,255,0.12);
      --ok:rgba(46,204,113,0.16);
      --ng:rgba(231,76,60,0.16);
      --shadow: 0 8px 24px rgba(0,0,0,0.35);
      --radius: 16px;
      --radius2: 12px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", Meiryo, sans-serif;
      background: var(--bg);
      color:var(--text);
      font-size:20px;
      line-height:1.55;
    }
    .wrap{ max-width: 980px; margin:0 auto; padding: 14px 12px 26px; }
    .title h1{ margin:0; font-size:20px; }
    .title .sub{ font-size:14px; color:var(--muted); }

    .card{
      margin-top:12px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:12px;
    }
    .label{ font-size:14px; color:var(--muted); }
    .qtext{ font-size:26px; font-weight:800; margin-top:6px; }

    .choices{ display:grid; gap:10px; margin-top:12px; }
    .btn{
      font-size:24px;
      padding:18px 14px;
      border-radius:var(--radius2);
      border:1px solid var(--line);
      background:#1b234a;
      color:var(--text);
      cursor:pointer;
    }
    .btn.small{ font-size:20px; padding:12px 14px; }
    .btn.primary{ background:#3245a8; }
    .btn:disabled{ opacity:.5; cursor:default; }

    .resultBox{
      margin-top:12px;
      padding:12px 14px;
      border-radius:var(--radius2);
      font-size:22px;
      white-space:pre-wrap;
    }
    .resultBox.ok{ background:var(--ok); }
    .resultBox.ng{ background:var(--ng); }

    .btnRow{ margin-top:12px; display:flex; gap:10px; }
  </style>
</head>
<body>
<div class="wrap">
  <div class="title">
    <h1>アイドル2択クイズ：どっちがメンバー？</h1>
    <div class="sub">ランダム10問 → 最後に結果表示</div>
  </div>

  <div class="card">
    <div class="label">問題</div>
    <div class="qtext" id="qText">「開始」を押してください</div>

    <div class="choices" id="choices"></div>
    <div class="resultBox" id="resultBox" style="display:none;"></div>

    <div class="btnRow">
      <button class="btn primary small" id="btnStart">開始</button>
      <button class="btn small" id="btnNext" disabled>次へ</button>
    </div>
  </div>
</div>

<script src="groups_data.js"></script>
<script>
var QUIZ_COUNT = 10;
var state = { deck:[], pos:0, ok:0, ng:0, locked:false, current:null };

var elQText = document.getElementById("qText");
var elChoices = document.getElementById("choices");
var elResult = document.getElementById("resultBox");
var btnStart = document.getElementById("btnStart");
var btnNext = document.getElementById("btnNext");

function rand(n){ return Math.floor(Math.random()*n); }
function shuffle(a){ for(let i=a.length-1;i>0;i--){let j=rand(i+1);[a[i],a[j]]=[a[j],a[i]];} return a;}

function buildDeck(){
  var idx=[];
  for(var i=0;i<GROUPS.length;i++){
    if(GROUPS[i].members && GROUPS[i].members.length) idx.push(i);
  }
  shuffle(idx);
  return idx.slice(0,QUIZ_COUNT);
}

function buildQuestion(){
  var g = GROUPS[state.deck[state.pos]];
  var correct = g.members[rand(g.members.length)];
  var dummy;
  do{
    var g2 = GROUPS[rand(GROUPS.length)];
    dummy = g2.members && g2.members.length ? g2.members[rand(g2.members.length)] : "";
  }while(dummy===correct || !dummy);

  return { group:g.group, correct:correct, choices:shuffle([correct,dummy]) };
}

function render(){
  elResult.style.display="none";
  btnNext.disabled=true;

  if(state.pos>=state.deck.length){
    elQText.textContent="終了";
    elChoices.innerHTML="";
    elResult.style.display="block";
    elResult.textContent="結果: "+state.ok+" / "+QUIZ_COUNT+" 正解";
    btnStart.style.display="";
    return;
  }

  state.current = buildQuestion();
  elQText.textContent="どっちが「"+state.current.group+"」のメンバー？";
  elChoices.innerHTML="";

  state.current.choices.forEach(function(c){
    var b=document.createElement("button");
    b.className="btn";
    b.textContent=c;
    b.onclick=function(){ answer(c); };
    elChoices.appendChild(b);
  });
}

function answer(sel){
  if(state.locked) return;
  state.locked=true;

  var ok = sel===state.current.correct;
  if(ok) state.ok++; else state.ng++;

  var msg = (ok?"正解。\n":"不正解。\n");
  msg += "正解: "+state.current.correct;

  elResult.className="resultBox "+(ok?"ok":"ng");
  elResult.textContent=msg;
  elResult.style.display="block";
  btnNext.disabled=false;
}

btnStart.onclick=function(){
  state.deck=buildDeck();
  state.pos=0; state.ok=0; state.ng=0;
  btnStart.style.display="none";
  render();
};

btnNext.onclick=function(){
  state.locked=false;
  state.pos++;
  render();
};
</script>
</body>
</html>
